/*! measureware v0.0.1 | (c) 2019 ADI | ADI License | https://bitbucket.analog.com */
var MW=ADI.Measureware={};MW.productCarouselSynced=(window.ADI=window.ADI||{},jQuery,window,{init:function(){var t=$("#mw-productCarousel__slider--pdp01"),e=$("#mw-productCarousel__thumbnails--pdp01"),r=document.querySelectorAll("#mw-productCarousel__thumbnails--pdp01 .mw-productCarousel__thumbnailItem").length,n=!0;"function"==typeof t.owlCarousel&&(t.owlCarousel({loop:!1,margin:10,nav:!1,callbacks:!0,info:!0,responsive:{0:{items:1},600:{items:1},1000:{items:1}},singleItem:!0}),e.owlCarousel({items:r,margin:0,nav:!0,navText:['<img src="./assets/svg/icons/icon--arrow-previous_u2533.svg" alt="Previous Slide" class="" />','<img src="./assets/svg/icons/icon--arrow-next_u2533.svg" alt="Next Slide" class="" />'],slideBy:r,responsive:{0:{items:1},600:{items:4},1000:{items:4}}}),t.on("changed.owl.carousel",(function(t){var r=t.item.index;e.find(".owl-item").removeClass("current").eq(r).addClass("current");var n=e.find(".owl-item.active").length-1,i=e.find(".owl-item.active").first().index(),a=e.find(".owl-item.active").last().index();r>a&&e.data("owl.carousel").to(r,100,!0),r<i&&e.data("owl.carousel").to(r-n,100,!0)})),e.on("initialized.owl.carousel",(function(){e.find(".owl-item").eq(0).addClass("current")})),e.on("changed.owl.carousel",(function(e){if(n){var r=e.item.index;t.data("owl.carousel").to(r,100,!0)}})),e.on("click",".owl-item",(function(e){e.preventDefault();var r=$(this).index();t.data("owl.carousel").to(r,300,!0)})))}}),$(document).ready((function(){MW.productCarouselSynced.init()})),MW.Cart={add:function(t){var e=this.get(),r=Object.assign({},t);if(this.includes(r.productID)){var n=this.get(r.productID);n.product.productQuantity+=1,e.splice(n.index,1,n.product)}else r.productQuantity=1,e.push(r);this.set(e)},empty:function(){localStorage.removeItem(this.name)},get:function(t){var e=localStorage.getItem(this.name);if(!e)return[];if(e=JSON.parse(e),!t)return e;for(var r=0;r<e.length;++r)if(e[r].productID===t)return{product:e[r],index:r};return null},getDetails:function(t){var e=this.get().map((function(t){return t.productID}));jQuery.getJSON(ADI.Config.digiKeyPartDetails,{products:e.join(",")}).done((function(e){console.log("Finish updating part details",e),t()})).fail((function(e){console.error(e),t()}))},includes:function(t){for(var e=this.get(),r=-1,n=0;n<e.length;++n)e[n].productID===t&&(r=n);return r>-1},name:"mwOrder",remove:function(t){var e=this.get();if(!this.includes(t))return console.info('Cannot remove. Item, "'+t+'", not in cart.');for(var r=0;r<e.length;++r)e[r].productID===t&&e.splice(r,1);this.set(e)},set:function(t){localStorage.setItem(this.name,"string"==typeof t?t:JSON.stringify(t))},summary:function(){var t=this.get(),e=0,r=0;return t.forEach((function(t){e+=t.productPrice*t.productQuantity,r+=t.productQuantity})),{subtotal:e=parseFloat(Math.round(100*e)/100).toFixed(2),totalQty:r}},update:function(t,e){var r=this.get(),n=this.get(t);return n?e<1?this.remove(t):(n.product.productQuantity=e,r.splice(n.index,1,n.product),void this.set(r)):console.info('Cannot update. Item, "'+t+'", not in cart.')}},MW.registerHB=(function(){var t=this;return{init:function(){t.registerHandlebarsHelper=function(){Handlebars.registerHelper("checkPCNPDN",(function(t,e,r){var n=!1,i=!1;return null!=t&&t.length>0&&(n=!0),null!=e&&e.length>0&&(i=!0),n||i?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("getPCNLabel",(function(t,e,r){var n,i=!1,a=!1;return t.PCNPDNInfoModelList.length>0&&(i=!0),t.PDNInfoModelList.length>0&&(a=!0),i&&!a?n=e:!i&&a?n=r:i&&a&&(n=e+"/"+r),n})),Handlebars.registerHelper("compare",(function(t,e,r,n){var i;if(arguments.length<3)throw new Error("Handlerbars Helper 'compare' needs 2 parameters");if(void 0===n&&(n=r,r=e,e="==="),!(i={"==":function(t,e){return t==e},"===":function(t,e){return t===e},"!=":function(t,e){return t!=e},"!==":function(t,e){return t!==e},"<":function(t,e){return t<e},">":function(t,e){return t>e},"<=":function(t,e){return t<=e},">=":function(t,e){return t>=e},typeof:function(t,e){return typeof t==e}})[e])throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+e);return i[e](t,r)?n.fn(this):n.inverse(this)})),Handlebars.registerHelper("ifCond",(function(t,e,r){return t===e?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("toFixedDecimal",(function(t){return parseFloat(Math.round(100*t)/100).toFixed(2)})),Handlebars.registerHelper("formatDate",(function(t,e){try{return moment(t).format(e)}catch(e){return t}})),Handlebars.registerHelper("getHTML",(function(t){return new Handlebars.SafeString(t)})),Handlebars.registerHelper("authorList",(function(e,r){var n=e.length,i="";for(t=0;t<n;t++)0==t?i=e[t]:i+=t>0&&t!=n-1?", "+e[t]:" and "+e[t];return new Handlebars.SafeString(i)}))},registerHandlebarsHelper()}}})(window.ADI=window.ADI||{},jQuery,window),$(document).ready((function(){"undefined"!=typeof Handlebars&&MW.registerHB.init()})),MW.Component=(function(){"use strict";var t=function(e,r){if(!(this instanceof t))throw new Error("Constructor needs to be called with the new keyword");if(!e)throw"Constructor needs to be called with an element to make into a component.";this.elem=e,this.data=r?r.data:null,this.template=r?r.template:null};return t.sanitize=function(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML},t.prototype.render=function(){if(!this.template)throw"mw-helper-template.js: No template was provided.";var t="string"==typeof this.elem?document.querySelector(this.elem):this.elem;if(t){var e="function"==typeof this.template?this.template(this.data):this.template;if(-1!==["string","number"].indexOf(typeof e)&&t.innerHTML!==e){if(t.innerHTML=e,"function"==typeof window.CustomEvent){var r=new CustomEvent("render",{bubbles:!0,detail:this.data||{}});t.dispatchEvent(r)}return t}}},t.prototype.setData=function(t){for(var e in t)t.hasOwnProperty(e)&&(this.data[e]=t[e]);this.render()},t.prototype.getData=function(){return JSON.parse(JSON.stringify(this.data))},t})(),MW.plpGrid=(function(){if("undefined"!=typeof g_oIndividualProducts){var t="mw-buttonTag__checkbox__input";if(MW.Component.sanitizeHTML=function(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML},void 0!==MW.Component){var e=new MW.Component("#mw-filterBy__tags--selected",{data:{criteriaSelected:[]},template:function(t){t.criteriaSelected;var e="";localStorage.setItem("criteriaSelected",JSON.stringify(t.criteriaSelected)),t.criteriaSelected&&t.criteriaSelected.length<1&&(e="");var r=t.criteriaSelected.map((function(t,e){var r=MW.Component.sanitizeHTML(t);return'<li class="mw-buttonTag__item">'+r+' <button class="mw-buttonText mw-buttonText--primaryIcon mw-buttonText--xs" aria-label="Remove '+r+'" data-criteria-item-selected="'+r+'" type="button">'+r+'<img src="./assets/svg/icons/icon--cancel_u149.svg" class="mw-buttonText__icon mw-buttonText__icon--right"</button></li>'}));return t.criteriaSelected.length>0&&(e+='<ul class="mw-buttonGroup--horizontal js-mw-filterBy__tags--selected" id="mw-filterBy__tags--selected">'+r.join("")+"</ul>"),e}}),r=new MW.Component("#mw-productGrid__view",{data:{individualProducts:null,individualFilterTypes:["measurementType","productType"],individualProductsFiltered:null,isFiltered:!1,currentFilterType:null,sorted:null},template:function(t){localStorage.setItem("individualProducts",JSON.stringify(t.individualProducts)),localStorage.setItem("individualProductsFiltered",JSON.stringify(t.individualProductsFiltered));var e,r=document.querySelector("#mw-productGrid__template").innerHTML,n=Handlebars.compile(r);return t.individualProductsFiltered&&t.isFiltered?t.individualProductsFiltered&&t.individualProductsFiltered.items.length>0?e=n(t.individualProductsFiltered):t.individualProductsFiltered&&0==t.individualProductsFiltered.items.length&&(e="<p><em>No items were found.</em></p>"):e=n(t.individualProducts),e}}),n=function(t){var n,i,a,o=t.target.getAttribute("data-criteria-item-selected");o&&(n=o,i=g().criteriaSelected,a=MW.Util.arrayRemove(i,n),e.setData({criteriaSelected:a}),u(o)),"js-mw-filterBy__measurement--clear"===t.target.className&&(e.setData({criteriaSelected:[]}),r.setData({individualProductsFiltered:null})),t.target.getAttribute("data-target")&&m(t.target),t.target.classList.contains("mw-productTileAto__button")&&(function(t){var e,r=localStorage.getItem("individualProducts");if(!r)return console.warn('Cannot add "'+t+'" to order. Products unavailable.');(e=(r=JSON.parse(r).items).find((function(e){return e.productID===t})))&&MW.Cart.add(e)})(t.target.dataset.id)},i=function(r){r.target.className!==t||(function(){if(!g())throw"Missing criteria to filter.";selected=o(),e.setData({criteriaSelected:selected})})()},a=function(t){if(!p().individualProducts)throw"Missing Individual Products to filter.";var e=s();r.setData({individualProductsFiltered:{items:e}}),e.length>0&&(r.setData({isFiltered:!0}),f())};!(function(){var t;function n(t){var n=localStorage.getItem("criteriaSelected");r.setData({individualProducts:t}),n||r.render(),console.log("productGrid.data: \n",r.getData()),console.log("criteriaFromUser.data: \n",e.getData())}t=document.getElementById("mw-productGrid__view").getAttribute("data-data-source"),jQuery.getJSON(t,n)})();document.addEventListener("click",n,!1),document.addEventListener("change",i,!1),document.addEventListener("render",a,!1);var o=function(){for(var e=document.querySelectorAll("."+t),r=[],n=[],i=0;i<e.length;i++)"checkbox"==e[i].type&&(r.push(e[i].checked),e[i].checked&&n.push(e[i].value));return n},u=function(e){var r=Array.from(document.querySelectorAll("."+t));if(!r||!e)throw"Missing DOM elements to compare.";r.map((function(t,r,n){t.value==e&&(t.checked=!1)}))},s=function(){return p().individualProducts.items.filter(d)},d=function(t){return p().individualFilterTypes.some(l,t)},l=function(t){var e=this[t];return 0!==c().filter((function(t){return e.indexOf(t)>-1})).length},c=function(){return g().criteriaSelected},m=function(t){var e=r.data.currentFilterType=t.getAttribute("data-target"),n=Array.from(document.querySelectorAll(".js-mw-filterByTags")),i=document.getElementById(e);e&&n&&i&&(MW.Util.toggle(i,"mw-toggle-content"),n.map((function(t){})),t.closest(".mw-toolbarFilterBy__heading").classList.toggle("mw-is-active"))},f=function(){var t=p(),e=document.querySelector(".mw-toolbarFilterBy__metabar"),r=document.querySelector(".mw-toolbarFilterBy__metabar .mw-badge"),n=t.individualProductsFiltered.items;r.innerHTML=n.length,MW.Util.addClass(e,"mw-is-open")},p=function(){return r.getData()},g=function(){return e.getData()};return{}}}})(window.ADI=window.ADI||{},jQuery,window),$(document).ready((function(){})),MW.ro=(function(){var t=new MW.Component("#mw-cartList__view",{data:{items:MW.Cart.get()},template:function(t){var e=u.innerHTML,r=Handlebars.compile(e);return t.items&&t.items.length>0?r(t):"<p><em>No items were found.</em></p>"}}),e=function(t){t.target.parentElement.classList.contains("mw-orderDetails__removeItem")&&i(t.target.parentElement.dataset.id)},r=function(t){t.target.classList.contains("mw-productDetailsAto__qty")&&a(t,t.target)},n=function(t){},i=function(e){MW.Cart.remove(e),t.setData({items:MW.Cart.get()}),o.setData(MW.Cart.summary())},a=function(e,r){var n=Number(r.value);if(n<1)return alert("figure out how to undo change");MW.Cart.update(r.dataset.id,n),t.setData({items:MW.Cart.get()}),o.setData(MW.Cart.summary())},o=new MW.Component("#mw-orderDetails__summary",{data:MW.Cart.summary(),template:function(t){var e=s.innerHTML;return Handlebars.compile(e)(t)}}),u=document.querySelector("#mw-cartList__template"),s=document.querySelector("#mw-orderDetails__template");return MW.Cart.getDetails((function(){t.render(),o.render()})),document.addEventListener("click",e,!1),document.addEventListener("change",r,!1),document.addEventListener("render",n,!1),{}})(window.ADI=window.ADI||{},jQuery,window);